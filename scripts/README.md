# SQL Scripts для проверки базы данных

## Как запустить скрипты в v0

Просто скажи мне: "запусти скрипт [имя_файла]" и я выполню его для тебя!

Например:
- "запусти скрипт list-all-galleries.sql"
- "запусти все проверочные скрипты"

## Описание скриптов

### 1. `list-all-galleries.sql`
Показывает список всех галерей с их ID и количеством фото.

**Когда использовать:** Чтобы узнать ID галереи для других скриптов.

**Что возвращает:**
- gallery_id (UUID галереи)
- gallery_title (название)
- gallery_date (дата события)
- total_photos (количество фото)

### 2. `check-photo-verification-status.sql`
Полная диагностика верификации фотографий по всем галереям.

**Что проверяет:**
- Фото БЕЗ лиц (обработка не запущена)
- Фото с ПОЛНОЙ верификацией (ВСЕ лица verified=true)
- Фото с ЧАСТИЧНОЙ верификацией (часть лиц verified, часть нет)
- Фото БЕЗ верификации (все лица unverified)

**Возвращает 3 таблицы:**
1. Статистика по каждой галерее
2. Детали фото с частичной верификацией
3. Общая статистика по всей БД

### 3. `find-problematic-photos.sql`
Находит проблемные фото для ручной проверки.

**Что ищет:**
- Фото с лицами, но без person_id (распознаны, но не идентифицированы)
- Фото с низкой уверенностью (confidence < 0.7)
- Фото где verified=true, но person_id=NULL (ошибка данных)

### 4. `gallery-verification-report.sql`
Детальный отчет по конкретной галерее (требует gallery_id).

**ВНИМАНИЕ:** Этот скрипт требует параметр! Сначала запусти `list-all-galleries.sql`, скопируй нужный gallery_id, потом скажи мне запустить этот скрипт с конкретным ID.

## Примеры использования

### Базовая проверка
\`\`\`
1. "запусти скрипт list-all-galleries.sql" - смотришь список
2. "запусти скрипт check-photo-verification-status.sql" - полная диагностика
\`\`\`

### Глубокая проверка конкретной галереи
\`\`\`
1. "запусти list-all-galleries.sql"
2. Копируешь gallery_id (например: 123e4567-e89b-12d3-a456-426614174000)
3. "запусти gallery-verification-report.sql для галереи 123e4567-e89b-12d3-a456-426614174000"
\`\`\`

### Поиск проблем
\`\`\`
"запусти find-problematic-photos.sql"
\`\`\`

## Что делать с результатами

После запуска скриптов ты увидишь:
- Какие галереи полностью верифицированы (100%)
- Какие требуют доработки (< 100%)
- Конкретные фото с проблемами

На основе этого я исправлю backend логику в `python/routers/galleries.py`.
