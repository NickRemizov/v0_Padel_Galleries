# üß† Face Recognition ‚Äî –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

> **–î–ª—è:** –ù–∏–∫–æ–ª–∞–π (–≤–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–æ–µ–∫—Ç–∞)
> **–¶–µ–ª—å:** –û—Å–≤–µ–∂–∏—Ç—å –ø–∞–º—è—Ç—å –∑–∞ 5 –º–∏–Ω—É—Ç
> **–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è:** `RECOGNITION_PROCESS_DOCUMENTATION.md`

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏)

```
–§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ ‚Üí InsightFace –Ω–∞—Ö–æ–¥–∏—Ç –ª–∏—Ü–∞ ‚Üí –ö–∞–∂–¥–æ–µ –ª–∏—Ü–æ = 512 —á–∏—Å–µ–ª (—ç–º–±–µ–¥–¥–∏–Ω–≥)
                                                    ‚Üì
                                    –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏
                                                    ‚Üì
                            –ü–æ—Ö–æ–∂–µ –Ω–∞ –ò–≤–∞–Ω–∞ (85%)? ‚Üí –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –ò–≤–∞–Ω—É
                            –ù–µ –ø–æ—Ö–æ–∂–µ –Ω–∏ –Ω–∞ –∫–æ–≥–æ? ‚Üí "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ –ª–∏—Ü–æ"
```

---

## –ö–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è

| –¢–µ—Ä–º–∏–Ω | –ß—Ç–æ —ç—Ç–æ | –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è |
|--------|---------|--------------|
| **–≠–º–±–µ–¥–¥–∏–Ω–≥** | 512 —á–∏—Å–µ–ª, –æ–ø–∏—Å—ã–≤–∞—é—â–∏—Ö –ª–∏—Ü–æ | `photo_faces.insightface_descriptor` |
| **BBox** | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ª–∏—Ü–∞ –Ω–∞ —Ñ–æ—Ç–æ | `photo_faces.insightface_bbox` |
| **Confidence** | –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (0-1) | `photo_faces.recognition_confidence` |
| **Verified** | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –≤—Ä—É—á–Ω—É—é | `photo_faces.verified` |
| **Excluded** | –ò—Å–∫–ª—é—á—ë–Ω –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ (outlier) | `photo_faces.excluded_from_index` |
| **HNSWLIB** | –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö | –í –ø–∞–º—è—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ |
| **HDBSCAN** | –ê–ª–≥–æ—Ä–∏—Ç–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ª–∏—Ü | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è "–Ω–∞ –ª–µ—Ç—É" |
| **Outlier** | –≠–º–±–µ–¥–¥–∏–Ω–≥, –Ω–µ –ø–æ—Ö–æ–∂–∏–π –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ | Similarity < 0.5 –∫ —Ü–µ–Ω—Ç—Ä–æ–∏–¥—É |

---

## –ë–µ–π–¥–∂–∏ –Ω–∞ —Ñ–æ—Ç–æ (—á—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç)

| –ë–µ–π–¥–∂ | –¶–≤–µ—Ç | –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç |
|-------|------|----------------|
| *–ë–µ–∑ –±–µ–π–¥–∂–∞* | ‚Äî | –ù–æ–≤–æ–µ —Ñ–æ—Ç–æ, –µ—â—ë –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ |
| **NFD** | –°–µ—Ä—ã–π | No Faces Detected ‚Äî –ª–∏—Ü –Ω–µ –Ω–∞–π–¥–µ–Ω–æ |
| **2/4** | –û—Ä–∞–Ω–∂–µ–≤—ã–π | 2 –Ω–µ–æ–ø–æ–∑–Ω–∞–Ω–Ω—ã—Ö –∏–∑ 4 –ª–∏—Ü |
| **75%** | –°–∏–Ω–∏–π | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è |
| **‚úì** | –ó–µ–ª—ë–Ω—ã–π | –í—Å–µ –ª–∏—Ü–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã |

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|-----------|--------------|------------|
| Min Face Size | 80 px | –û—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ –ª–∏—Ü–∞ |
| Min Blur Score | 100 | –û—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ä–∞–∑–º—ã—Ç—ã–µ –ª–∏—Ü–∞ |
| Min Detection Score | 0.7 | –û—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç "—Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–µ" –ª–∏—Ü–∞ |
| Outlier Threshold | 0.5 | –ü–æ—Ä–æ–≥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è outliers |

**–ì–¥–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:** –ê–¥–º–∏–Ω–∫–∞ ‚Üí Face Training Manager ‚Üí Quality Filters

---

## –ê—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ ‚≠ê NEW

### –ß—Ç–æ —ç—Ç–æ?
–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ "–ø–ª–æ—Ö–∏—Ö" —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ ‚Äî outliers, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ä—Ç—è—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –±–µ—Ä—ë–º –≤—Å–µ –µ–≥–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
2. –í—ã—á–∏—Å–ª—è–µ–º —Ü–µ–Ω—Ç—Ä–æ–∏–¥ (—É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã–π –≤–µ–∫—Ç–æ—Ä)
3. –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–π —ç–º–±–µ–¥–¥–∏–Ω–≥ —Å —Ü–µ–Ω—Ç—Ä–æ–∏–¥–æ–º
4. –ï—Å–ª–∏ similarity < 0.5 ‚Üí —ç—Ç–æ outlier

### UI –≤ –∞–¥–º–∏–Ω–∫–µ
- **–ú–µ–Ω—é:** "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤"
- **–ö–æ–ª–æ–Ω–∫–∏:** –ò–≥—Ä–æ–∫ | –§–æ—Ç–æ | –î–µ—Å–∫—Ä. | Outliers | –ö–æ–Ω—Å–∏—Å—Ç. | –î–µ–π—Å—Ç–≤–∏—è

### –§–æ—Ä–º–∞—Ç –∫–æ–ª–æ–Ω–∫–∏ Outliers
- `0` ‚Äî –ø—Ä–æ–±–ª–µ–º –Ω–µ—Ç
- `3` ‚Äî –µ—Å—Ç—å 3 –∏—Å–∫–ª—é—á—ë–Ω–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–∞
- `3/2` ‚Äî 3 –∏—Å–∫–ª—é—á—ë–Ω–Ω—ã—Ö + 2 –Ω–æ–≤—ã—Ö outliers –Ω–∞–π–¥–µ–Ω–æ

### –î–µ–π—Å—Ç–≤–∏—è
- **–î–µ—Ç–∞–ª–∏** ‚Äî –æ—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏–≥—Ä–æ–∫–∞
- **üîß** (–≥–∞–µ—á–Ω—ã–π –∫–ª—é—á) ‚Äî –∏—Å–∫–ª—é—á–∏—Ç—å –≤—Å–µ outliers –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º
- **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ** ‚Äî –º–∞—Å—Å–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–∏
1. `excluded_from_index = true` –≤ –±–∞–∑–µ
2. –≠–º–±–µ–¥–¥–∏–Ω–≥ —É–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ HNSW –∏–Ω–¥–µ–∫—Å–∞
3. –≠–º–±–µ–¥–¥–∏–Ω–≥ **–æ—Å—Ç–∞—ë—Ç—Å—è** –≤ –±–∞–∑–µ (–º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å)
4. –§–æ—Ç–æ —Å —ç—Ç–∏–º —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å —Å–µ—Ä—ã–º —Ñ–æ–Ω–æ–º

### –ö–∞–∫ –≤–µ—Ä–Ω—É—Ç—å –∏—Å–∫–ª—é—á—ë–Ω–Ω—ã–π —ç–º–±–µ–¥–¥–∏–Ω–≥
1. –î–µ—Ç–∞–ª–∏ ‚Üí –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π —ç–º–±–µ–¥–¥–∏–Ω–≥
2. –ù–∞–∂–∞—Ç—å "–í–µ—Ä–Ω—É—Ç—å"
3. `excluded_from_index = false`
4. –ò–Ω–¥–µ–∫—Å –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
- Drag & Drop –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å"
- –§–æ—Ç–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è –±–µ–∑ –±–µ–π–¥–∂–∞

### 2. –ü–∞–∫–µ—Ç–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
- –ö–Ω–æ–ø–∫–∞ "–†–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ñ–æ—Ç–æ" üîç
- –ì–∞–ª–æ—á–∫–∞ "–ü—Ä–∏–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞" (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –ñ–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### 3. –†–∞–±–æ—Ç–∞ —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –ª–∏—Ü–∞–º–∏
- –ö–Ω–æ–ø–∫–∞ "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ª–∏—Ü–∞" üë§+
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä—ã (–ø–æ—Ö–æ–∂–∏–µ –ª–∏—Ü–∞)
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞:
  - **"–°–æ–∑–¥–∞—Ç—å –∏–≥—Ä–æ–∫–∞"** ‚Äî –µ—Å–ª–∏ –Ω–æ–≤—ã–π —á–µ–ª–æ–≤–µ–∫
  - **"–í—ã–±—Ä–∞—Ç—å –∏–≥—Ä–æ–∫–∞"** ‚Äî –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ
  - **"–ó—Ä–∏—Ç–µ–ª–∏"** ‚Äî –µ—Å–ª–∏ –Ω–µ –∏–≥—Ä–æ–∫
  - **"X"** ‚Äî –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏

### 4. –†—É—á–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ö–ª–∏–∫ –Ω–∞ —Ñ–æ—Ç–æ ‚Üí –≤—ã–±—Ä–∞—Ç—å –∏–≥—Ä–æ–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏—Ü–∞
- –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Üí –±–µ–π–¥–∂ ‚úì

### 5. –ê—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏)
- –ú–µ–Ω—é ‚Üí "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤"
- –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–≥—Ä–æ–∫–æ–≤ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ (–∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω)
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å outliers –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ—Ç–∞–ª–∏

---

## –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ü–æ—á–µ–º—É –ª–∏—Ü–æ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç—Å—è?
1. –°–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–æ–µ (< Min Face Size)
2. –†–∞–∑–º—ã—Ç–æ–µ (< Min Blur Score)
3. –ò–≥—Ä–æ–∫–∞ –Ω–µ—Ç –≤ –±–∞–∑–µ (—Å–æ–∑–¥–∞–π —á–µ—Ä–µ–∑ "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ª–∏—Ü–∞")
4. –≠–º–±–µ–¥–¥–∏–Ω–≥ –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ (–ø—Ä–æ–≤–µ—Ä—å –≤ –∞—É–¥–∏—Ç–µ)

### –ü–æ—á–µ–º—É —É –∏–≥—Ä–æ–∫–∞ 0 –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤, –Ω–æ –µ—Å—Ç—å —Ñ–æ—Ç–æ?
- –õ–∏—Ü–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é –±–µ–∑ InsightFace
- –†–µ—à–µ–Ω–∏–µ: "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã" –≤ Integrity Checker

### –ö–∞–∫ —É–ª—É—á—à–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞?
1. –ù–∞–π—Ç–∏ –µ–≥–æ —Ñ–æ—Ç–æ —Ö–æ—Ä–æ—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
2. –í—Ä—É—á–Ω—É—é –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å (verified = true)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ ‚Äî –∏—Å–∫–ª—é—á–∏—Ç—å outliers
4. –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–æ–±—É—á–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ß—Ç–æ —Ç–∞–∫–æ–µ outlier –∏ –ø–æ—á–µ–º—É –µ–≥–æ –∏—Å–∫–ª—é—á–∞—é—Ç?
- Outlier ‚Äî —ç–º–±–µ–¥–¥–∏–Ω–≥, –∫–æ—Ç–æ—Ä—ã–π —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ —Ç–æ–≥–æ –∂–µ –∏–≥—Ä–æ–∫–∞
- –ü—Ä–∏—á–∏–Ω—ã: –ø–ª–æ—Ö–æ–µ —Ñ–æ—Ç–æ, –Ω–µ–≤–µ—Ä–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞, —Å–±–æ–π –¥–µ—Ç–µ–∫—Ü–∏–∏
- –ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å ‚Äî —É—Ö—É–¥—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ç–æ –∏–≥—Ä–æ–∫–∞

### –ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ —ç–º–±–µ–¥–¥–∏–Ω–≥ ‚Äî outlier?
- Similarity to centroid < 0.5 (50%)
- –•–æ—Ä–æ—à–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –æ–±—ã—á–Ω–æ –∏–º–µ—é—Ç 70-90%
- –í –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ outliers –ø–æ–∫–∞–∑–∞–Ω—ã —Å –∫—Ä–∞—Å–Ω—ã–º —Ñ–æ–Ω–æ–º

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–æ—á–µ–Ω—å –∫—Ä–∞—Ç–∫–æ)

```
Frontend (Next.js)
    ‚Üì
/api/face-detection/detect ‚Üí FastAPI ‚Üí InsightFace
/api/face-detection/recognize ‚Üí FastAPI ‚Üí HNSWLIB –ø–æ–∏—Å–∫
    ‚Üì
Supabase (photo_faces —Ç–∞–±–ª–∏—Ü–∞)
```

**Backend:** http://vlcpadel.com:8001
**–ú–æ–¥–µ–ª—å:** InsightFace antelopev2

---

## API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–∞—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏)

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/people/consistency-audit` | –ê—É–¥–∏—Ç –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ |
| GET | `/people/{id}/embedding-consistency` | –î–µ—Ç–∞–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏–≥—Ä–æ–∫–∞ |
| POST | `/people/{id}/clear-outliers` | –ò—Å–∫–ª—é—á–∏—Ç—å outliers –∏–≥—Ä–æ–∫–∞ |
| POST | `/people/audit-all-embeddings` | –ú–∞—Å—Å–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ |
| POST | `/faces/{id}/toggle-excluded` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å excluded |

---

## –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å (–∏–¥–µ–∏)

1. **–ö–æ–Ω—Ç–µ–∫—Å—Ç** ‚Äî –µ—Å–ª–∏ –ò–≤–∞–Ω —É–∂–µ –Ω–∞ 3 —Ñ–æ—Ç–æ –≥–∞–ª–µ—Ä–µ–∏, –ø–æ–≤—ã—Å–∏—Ç—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è 4-–≥–æ
2. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π blur** ‚Äî –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –ª–∏—Ü blur score –º–µ–Ω–µ–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–Ω
3. **–ê–≤—Ç–æ–æ–±—É—á–µ–Ω–∏–µ** ‚Äî –ø–µ—Ä–µ–æ–±—É—á–∞—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–æ—á—å—é –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
4. **–ê–≤—Ç–æ–∞—É–¥–∏—Ç** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—å outliers –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 20 –¥–µ–∫–∞–±—Ä—è 2025*
