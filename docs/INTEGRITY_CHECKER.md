# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü.

---

## –û–±–∑–æ—Ä

**Integrity Checker** –≤—ã–ø–æ–ª–Ω—è–µ—Ç 8 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.

**–î–æ—Å—Ç—É–ø:** –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –ê—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ ‚≠ê NEW

–û—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è outliers (–ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤).

**–î–æ—Å—Ç—É–ø:** –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤"

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
- –í—ã—á–∏—Å–ª—è–µ—Ç —Ü–µ–Ω—Ç—Ä–æ–∏–¥ (—É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã–π –≤–µ–∫—Ç–æ—Ä)
- –ù–∞—Ö–æ–¥–∏—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —Å –Ω–∏–∑–∫–∏–º similarity –∫ —Ü–µ–Ω—Ç—Ä–æ–∏–¥—É (< 0.5)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç—å outliers –∏–∑ HNSW –∏–Ω–¥–µ–∫—Å–∞

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** –°–º. —Ä–∞–∑–¥–µ–ª "–ê—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏" –≤ RECOGNITION_SUMMARY.md

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫

### üìä –î–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫:

1. **Photo Faces** (5 –ø—Ä–æ–≤–µ—Ä–æ–∫) - –ü—Ä–æ–±–ª–µ–º—ã —Å –ª–∏—Ü–∞–º–∏ –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö
2. **People** (3 –ø—Ä–æ–≤–µ—Ä–∫–∏) - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏–≥—Ä–æ–∫–∞–º

---

## 1. –ü—Ä–æ–±–ª–µ–º—ã —Å –ª–∏—Ü–∞–º–∏ –Ω–∞ —Ñ–æ—Ç–æ (Photo Faces)

### 1.1. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –ª–∏—Ü–∞ –±–µ–∑ –∏–≥—Ä–æ–∫–∞ ‚ö†Ô∏è

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
\`\`\`sql
SELECT * FROM photo_faces 
WHERE verified = true 
AND person_id IS NULL
\`\`\`

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –õ–∏—Ü–æ –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–µ" (`verified = true`)
- –ù–æ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –Ω–∏ –∫ –∫–∞–∫–æ–º—É –∏–≥—Ä–æ–∫—É (`person_id = NULL`)
- –≠—Ç–æ **–ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–µ –ª–∏—Ü–æ –î–û–õ–ñ–ù–û –∏–º–µ—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞

**–ü—Ä–∏—á–∏–Ω—ã –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è:**
- –û—à–∏–±–∫–∞ –≤ UI –ø—Ä–∏ —Ä—É—á–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –£–¥–∞–ª–∏–ª–∏ –∏–≥—Ä–æ–∫–∞, –Ω–æ –∑–∞–±—ã–ª–∏ —Å–Ω—è—Ç—å `verified`
- –ë–∞–≥ –≤ –∫–æ–¥–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

**–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
\`\`\`typescript
// –ê–≤—Ç–æ—Ñ–∏–∫—Å: —Å–Ω—è—Ç—å verified —É –ª–∏—Ü –±–µ–∑ person_id
UPDATE photo_faces 
SET verified = false, confidence = null
WHERE verified = true AND person_id IS NULL
\`\`\`

**–î–µ–π—Å—Ç–≤–∏–µ:** –ö–Ω–æ–ø–∫–∞ "–ò—Å–ø—Ä–∞–≤–∏—Ç—å" ‚Üí —Å–Ω–∏–º–∞–µ—Ç `verified` —Ñ–ª–∞–≥

---

### 1.2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –ª–∏—Ü–∞ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é ‚ö†Ô∏è

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
\`\`\`sql
SELECT * FROM photo_faces 
WHERE verified = true 
AND confidence != 1.0
\`\`\`

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –õ–∏—Ü–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –≤—Ä—É—á–Ω—É—é (`verified = true`)
- –ù–æ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –Ω–µ 100% (`confidence != 1.0`)
- –ü—Ä–∞–≤–∏–ª–æ: **–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–µ = —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å 1.0 (100%)**

**–ü—Ä–∏—á–∏–Ω—ã –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è:**
- –°—Ç–∞—Ä—ã–π –∫–æ–¥ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª `confidence` –ø—Ä–∏ —Ä—É—á–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã
- –ë–∞–≥ –≤ endpoint –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
\`\`\`typescript
// –ê–≤—Ç–æ—Ñ–∏–∫—Å: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å confidence = 1.0 –¥–ª—è verified
UPDATE photo_faces 
SET confidence = 1.0
WHERE verified = true AND confidence != 1.0
\`\`\`

**–î–µ–π—Å—Ç–≤–∏–µ:** –ö–Ω–æ–ø–∫–∞ "–ò—Å–ø—Ä–∞–≤–∏—Ç—å" ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `confidence = 1.0`

---

### 1.3. –õ–∏—Ü–∞ —Å –∏–≥—Ä–æ–∫–æ–º –±–µ–∑ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ ‚ö†Ô∏è

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
\`\`\`sql
SELECT * FROM photo_faces 
WHERE person_id IS NOT NULL 
AND confidence IS NULL
\`\`\`

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –õ–∏—Ü–æ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –∏–≥—Ä–æ–∫—É (`person_id` —É–∫–∞–∑–∞–Ω)
- –ù–æ –Ω–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (`confidence = NULL`)
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å - —ç—Ç–æ –∞–≤—Ç–æ—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–ª–∏ —Ä—É—á–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

**–ü—Ä–∏—á–∏–Ω—ã –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è:**
- –†—É—á–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `confidence`
- –°—Ç–∞—Ä–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

**–ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ UI:**
- –í –≥–∞–ª–µ—Ä–µ–µ –∏–≥—Ä–æ–∫–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ñ–æ—Ç–æ –±–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∫–∞—á–µ—Å—Ç–≤—É —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `confidence = 0.5` –¥–ª—è —Ç–∞–∫–∏—Ö –ª–∏—Ü (–µ—Å–ª–∏ —ç—Ç–æ –∞–≤—Ç–æ—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ) –∏–ª–∏ `confidence = 1.0` –∏ `verified = true` (–µ—Å–ª–∏ —Ä—É—á–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)

---

### 1.4. –õ–∏—Ü–∞ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∏–≥—Ä–æ–∫–æ–º ‚ö†Ô∏è

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
\`\`\`sql
SELECT pf.* FROM photo_faces pf
LEFT JOIN people p ON pf.person_id = p.id
WHERE pf.person_id IS NOT NULL 
AND p.id IS NULL
\`\`\`

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –õ–∏—Ü–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∏–≥—Ä–æ–∫–∞ (`person_id = "abc-123"`)
- –ù–æ —Ç–∞–∫–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –Ω–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `people`
- **–ë–∏—Ç–∞—è —Å—Å—ã–ª–∫–∞** - –¥–∞–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã

**–ü—Ä–∏—á–∏–Ω—ã –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è:**
- –£–¥–∞–ª–∏–ª–∏ –∏–≥—Ä–æ–∫–∞, –Ω–µ –æ—á–∏—Å—Ç–∏–≤ –ø—Ä–∏–≤—è–∑–∫–∏ –ª–∏—Ü
- –†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î —Å –æ—à–∏–±–∫–æ–π
- –ë–∞–≥ –≤ –∫–∞—Å–∫–∞–¥–Ω–æ–º —É–¥–∞–ª–µ–Ω–∏–∏ (ON DELETE SET NULL –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª)

**–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
\`\`\`typescript
// –ê–≤—Ç–æ—Ñ–∏–∫—Å: –æ—á–∏—Å—Ç–∏—Ç—å –±–∏—Ç—ã–µ —Å—Å—ã–ª–∫–∏
UPDATE photo_faces 
SET person_id = NULL, verified = false, confidence = NULL
WHERE person_id NOT IN (SELECT id FROM people)
\`\`\`

**–î–µ–π—Å—Ç–≤–∏–µ:** –ö–Ω–æ–ø–∫–∞ "–ò—Å–ø—Ä–∞–≤–∏—Ç—å" ‚Üí —É–±–∏—Ä–∞–µ—Ç –±–∏—Ç—ã–µ —Å—Å—ã–ª–∫–∏, –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –ª–∏—Ü–∞ –≤ "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ"

---

### 1.5. –õ–∏—Ü–∞ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π ‚ö†Ô∏è

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
\`\`\`sql
SELECT pf.* FROM photo_faces pf
LEFT JOIN gallery_images gi ON pf.photo_id = gi.id
WHERE gi.id IS NULL
\`\`\`

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –ó–∞–ø–∏—Å—å –ª–∏—Ü–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ñ–æ—Ç–æ (`photo_id = "xyz-456"`)
- –ù–æ —Ç–∞–∫–æ–≥–æ —Ñ–æ—Ç–æ –Ω–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `gallery_images`
- **–ë–∏—Ç–∞—è —Å—Å—ã–ª–∫–∞** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –ø—Ä–µ–≤—å—é –ª–∏—Ü–∞

**–ü—Ä–∏—á–∏–Ω—ã –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è:**
- –£–¥–∞–ª–∏–ª–∏ —Ñ–æ—Ç–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏, –Ω–æ –∑–∞–±—ã–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å –ª–∏—Ü–∞
- –ë–∞–≥ –≤ –∫–∞—Å–∫–∞–¥–Ω–æ–º —É–¥–∞–ª–µ–Ω–∏–∏ (ON DELETE CASCADE –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª)
- –†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î

**–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å:**
\`\`\`typescript
// –ê–≤—Ç–æ—Ñ–∏–∫—Å: —É–¥–∞–ª–∏—Ç—å –ª–∏—Ü–∞ —Å –±–∏—Ç—ã–º–∏ —Ñ–æ—Ç–æ
DELETE FROM photo_faces 
WHERE photo_id NOT IN (SELECT id FROM gallery_images)
\`\`\`

**–î–µ–π—Å—Ç–≤–∏–µ:** –ö–Ω–æ–ø–∫–∞ "–ò—Å–ø—Ä–∞–≤–∏—Ç—å" ‚Üí –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ—Ç –±–∏—Ç—ã–µ –∑–∞–ø–∏—Å–∏ –ª–∏—Ü

---

## 2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–æ–∫–∞—Ö (People)

### 2.1. –ò–≥—Ä–æ–∫–∏ –±–µ–∑ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ üìä

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
\`\`\`sql
SELECT p.* FROM people p
WHERE p.id NOT IN (
  SELECT DISTINCT person_id FROM photo_faces 
  WHERE insightface_descriptor IS NOT NULL 
  AND person_id IS NOT NULL
  AND (excluded_from_index IS NULL OR excluded_from_index = false)
)
\`\`\`

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –í –±–∞–∑–µ –µ—Å—Ç—å –∏–≥—Ä–æ–∫
- –ù–æ —É –Ω–µ–≥–æ –Ω–µ—Ç –ù–ò –û–î–ù–û–ì–û –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ª–∏—Ü–∞ —Å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–º
- –°–∏—Å—Ç–µ–º–∞ **–Ω–µ –º–æ–∂–µ—Ç** —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —ç—Ç–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª–µ `excluded_from_index` ‚Äî –∏—Å–∫–ª—é—á—ë–Ω–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è.

**–≠—Ç–æ –ù–ï –æ—à–∏–±–∫–∞, –∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- –ò–≥—Ä–æ–∫ –Ω–µ–¥–∞–≤–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω, –µ—â—ë –Ω–µ—Ç —Ñ–æ—Ç–æ
- –í—Å–µ –µ–≥–æ —Ñ–æ—Ç–æ –Ω–µ –∏–º–µ—é—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ (–Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–ª–∏ —Ä—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ)
- –õ–∏—Ü–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –≤—Ä—É—á–Ω—É—é, –Ω–æ InsightFace –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –í—Å–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –∏—Å–∫–ª—é—á–µ–Ω—ã –∫–∞–∫ outliers

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ –∏–≥—Ä–æ–∫–∞
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
3. –í—Ä—É—á–Ω—É—é –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ª–∏—Ü–∞
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É **"–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã"** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å **"–ê—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏"** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, –≤—Å–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –∏—Å–∫–ª—é—á–µ–Ω—ã

---

### 2.2. –ò–≥—Ä–æ–∫–∏ –±–µ–∑ —Ñ–æ—Ç–æ üìä

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
\`\`\`sql
SELECT p.* FROM people p
WHERE p.id NOT IN (
  SELECT DISTINCT person_id FROM photo_faces
  WHERE person_id IS NOT NULL
)
\`\`\`

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –ò–≥—Ä–æ–∫ —Å–æ–∑–¥–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ
- –ù–æ –Ω–µ—Ç –ù–ò –û–î–ù–û–ì–û —Ñ–æ—Ç–æ —Å –µ–≥–æ –ª–∏—Ü–æ–º

**–≠—Ç–æ –ù–ï –æ—à–∏–±–∫–∞:**
- –ò–≥—Ä–æ–∫ —Ç–æ–ª—å–∫–æ —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω
- –ñ–¥—ë—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
- –†–µ–∑–µ—Ä–≤–Ω–∞—è –∑–∞–ø–∏—Å—å (—Å–æ–∑–¥–∞–ª–∏ –∑–∞—Ä–∞–Ω–µ–µ)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∏–≥—Ä–æ–∫–∞

---

### 2.3. –î—É–±–ª–∏–∫–∞—Ç—ã –∏–º—ë–Ω üìä

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
\`\`\`sql
SELECT real_name, telegram_username, COUNT(*) 
FROM people 
GROUP BY real_name, telegram_username 
HAVING COUNT(*) > 1
\`\`\`

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –∏–≥—Ä–æ–∫–æ–≤ —Å **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–º** –∏–º–µ–Ω–µ–º –ò telegram username
- **–ù–∞—Å—Ç–æ—è—â–∏–π –¥—É–±–ª–∏–∫–∞—Ç** - –Ω—É–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å

**–í–∞–∂–Ω–æ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç telegram username!
- "–ï–≤–≥–µ–Ω–∏–π (@neakip)" ‚â† "–ï–≤–≥–µ–Ω–∏–π (@eugentius)" ‚â† "–ï–≤–≥–µ–Ω–∏–π (Eugene Nevograd)" ‚úÖ –≠—Ç–æ —Ä–∞–∑–Ω—ã–µ –ª—é–¥–∏
- "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä (@alex123)" = "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä (@alex123)" ‚ö†Ô∏è –≠—Ç–æ –¥—É–±–ª–∏–∫–∞—Ç

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏
2. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –∑–∞–ø–∏—Å–∏ –≤—Ä—É—á–Ω—É—é (–ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—Å–µ —Ñ–æ—Ç–æ –Ω–∞ –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞)
3. –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç

**–î–µ–π—Å—Ç–≤–∏–µ:** –ö–Ω–æ–ø–∫–∞ "–î–µ—Ç–∞–ª–∏" ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥—É–±–ª—è—Ö

---

## 3. –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 3.1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã üîß

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –ª–∏—Ü–∞ (`verified = true`) —Å –∏–≥—Ä–æ–∫–æ–º
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —É –Ω–∏—Ö `insightface_descriptor`
3. –ï—Å–ª–∏ –ù–ï–¢ - –∑–∞–ø—É—Å–∫–∞–µ—Ç InsightFace –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Ñ–æ—Ç–æ
4. –í—ã—á–∏—Å–ª—è–µ—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä —á–µ—Ä–µ–∑ IoU matching bbox
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –≤ `photo_faces.insightface_descriptor`

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–æ—Å–ª–µ —Ä—É—á–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ª–∏—Ü
- –ö–æ–≥–¥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0 –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤, –Ω–æ –µ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ —Ñ–æ—Ç–æ
- –ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–æ—Ü–µ—Å—Å:**
\`\`\`
1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ª–∏—Ü –±–µ–∑ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏—Ü–∞:
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å InsightFace –¥–µ—Ç–µ–∫—Ü–∏—é
   - –ù–∞–π—Ç–∏ –ª–∏—Ü–æ –ø–æ bbox —á–µ—Ä–µ–∑ IoU (Intersection over Union)
   - –ò–∑–≤–ª–µ—á—å 512-–º–µ—Ä–Ω—ã–π –≤–µ–∫—Ç–æ—Ä
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ photo_faces.insightface_descriptor
3. –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
\`\`\`

**UI:**
- Progress bar —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –ª–∏—Ü
- –°–ø–∏—Å–æ–∫ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö (—Å IoU score)
- –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ (–µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ª–∏—Ü–æ)

---

### 3.2. –ê—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ üîß NEW

**–û—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç** –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è outliers.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
2. –í—ã—á–∏—Å–ª—è–µ—Ç —Ü–µ–Ω—Ç—Ä–æ–∏–¥ (—É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã–π –≤–µ–∫—Ç–æ—Ä)
3. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π —ç–º–±–µ–¥–¥–∏–Ω–≥ —Å —Ü–µ–Ω—Ç—Ä–æ–∏–¥–æ–º
4. –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ —Å similarity < 0.5 –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ outliers
5. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç—å outliers –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ï—Å–ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–æ—Ö–æ
- –ü–æ—Å–ª–µ –º–∞—Å—Å–æ–≤–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (—Ä–∞–∑ –≤ –º–µ—Å—è—Ü) –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏

**–î–æ—Å—Ç—É–ø:** –ú–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ ‚Üí "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤"

**–î–µ–π—Å—Ç–≤–∏—è:**
- **–î–µ—Ç–∞–ª–∏** ‚Äî –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –∏–≥—Ä–æ–∫–∞ —Å similarity scores
- **üîß** ‚Äî –∏—Å–∫–ª—é—á–∏—Ç—å –≤—Å–µ outliers –∏–≥—Ä–æ–∫–∞
- **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ** ‚Äî –º–∞—Å—Å–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–∏:**
\`\`\`sql
UPDATE photo_faces 
SET excluded_from_index = true 
WHERE id = 'face_id'
\`\`\`

- –≠–º–±–µ–¥–¥–∏–Ω–≥ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –±–∞–∑–µ
- –£–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ HNSW –∏–Ω–¥–µ–∫—Å–∞
- –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ —á–µ—Ä–µ–∑ "–î–µ—Ç–∞–ª–∏"

---

### 3.3. –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∑–∞–ø–∏—Å–µ–π üßπ

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ù–∞—Ö–æ–¥–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫/—Ñ–æ—Ç–æ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∏–º–µ–Ω–∞–º–∏/URL
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å

**–í–Ω–∏–º–∞–Ω–∏–µ:** –†—É—á–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

---

### 3.4. –û—á–∏—Å—Ç–∫–∞ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã—Ö –ª–∏—Ü üßπ

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
\`\`\`typescript
// –£–¥–∞–ª—è–µ—Ç –ª–∏—Ü–∞ —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é, –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é
DELETE FROM photo_faces 
WHERE verified = false 
AND confidence < 0.5
AND created_at < NOW() - INTERVAL '30 days'
\`\`\`

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–µ—Ä–µ–¥ –æ–±—É—á–µ–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ (–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- –ï—Å–ª–∏ –ë–î —Ä–∞–∑–¥—É–ª–∞—Å—å –∏–∑-–∑–∞ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

---

### 3.5. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è verified/confidence üîÑ

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
\`\`\`typescript
// –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è verified <-> confidence
UPDATE photo_faces 
SET confidence = 1.0
WHERE verified = true AND confidence != 1.0

UPDATE photo_faces 
SET verified = false
WHERE verified = true AND person_id IS NULL
\`\`\`

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ï—Å–ª–∏ integrity checker –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Ç–∏–ø–∞ 1.1 –∏ 1.2
- –ü–æ—Å–ª–µ –º–∞—Å—Å–æ–≤–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

---

## 4. –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### üü¢ "–í—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º: 0" - –û—Ç–ª–∏—á–Ω–æ!
–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ü–µ–ª–æ—Å—Ç–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### üü° "–í—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º: < 100" - –ù–æ—Ä–º–∞–ª—å–Ω–æ
–ù–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –≤–æ–∑–Ω–∏–∫—à–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã. –ú–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ñ–∏–∫—Å–∞–º–∏.

### üî¥ "–í—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º: > 100" - –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è
–í–æ–∑–º–æ–∂–Ω–æ:
- –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç —Å –æ—à–∏–±–∫–∞–º–∏
- –ë–∞–≥ –≤ –∫–æ–¥–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- –£–¥–∞–ª–µ–Ω—ã –∏–≥—Ä–æ–∫–∏ –±–µ–∑ –æ—á–∏—Å—Ç–∫–∏ —Å–≤—è–∑–µ–π

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ—Ñ–∏–∫—Å—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º (1.1, 1.2, 1.4, 1.5)
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã" –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å "–ê—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏" –¥–ª—è –ø–æ–∏—Å–∫–∞ outliers
4. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫

---

## 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∞–≤—Ç–æ—Ñ–∏–∫—Å–æ–≤

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è):

1. **–°–Ω—è—Ç—å verified —É –ª–∏—Ü –±–µ–∑ –∏–≥—Ä–æ–∫–∞** - –ª–æ–≥–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å confidence = 1.0 –¥–ª—è verified** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
3. **–û—á–∏—Å—Ç–∏—Ç—å –±–∏—Ç—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–≥—Ä–æ–∫–æ–≤** - –¥–∞–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã
4. **–£–¥–∞–ª–∏—Ç—å –ª–∏—Ü–∞ —Å –±–∏—Ç—ã–º–∏ —Ñ–æ—Ç–æ** - –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å
5. **–ò—Å–∫–ª—é—á–∏—Ç—å outliers –∏–∑ –∏–Ω–¥–µ–∫—Å–∞** - —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –±–∞–∑–µ

### ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏:

1. **–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã—Ö –ª–∏—Ü** - –º–æ–∂–Ω–æ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
2. **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏–≥—Ä–æ–∫–æ–≤** - –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### ‚ùå –û–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ù–ï –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã):

1. –£–¥–∞–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤
2. –ú–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ person_id
3. –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤

---

## 6. –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### Q: –ü–æ—á–µ–º—É —É –∏–≥—Ä–æ–∫–∞ 9 —Ñ–æ—Ç–æ, –Ω–æ 0 –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤?

**A:** `photo_faces.insightface_descriptor IS NULL` —É –≤—Å–µ—Ö –µ–≥–æ —Ñ–æ—Ç–æ. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. –õ–∏—Ü–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é, –±–µ–∑ –ø—Ä–æ–≥–æ–Ω–∞ —á–µ—Ä–µ–∑ InsightFace
2. –°—Ç–∞—Ä—ã–π –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (–¥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è InsightFace)
3. –ë–∞–≥ –≤ –∫–æ–¥–µ - –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å
4. –í—Å–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –∏—Å–∫–ª—é—á–µ–Ω—ã –∫–∞–∫ outliers

**–†–µ—à–µ–Ω–∏–µ:** 
- –ù–∞–∂–º–∏—Ç–µ "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã" - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ "–ê—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏" ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –µ—Å—Ç—å, –Ω–æ –∏—Å–∫–ª—é—á–µ–Ω—ã

---

### Q: –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã –ª–∏—Ü?

**A:** –í –ø–æ–ª–µ `photo_faces.insightface_descriptor` (512-–º–µ—Ä–Ω—ã–π –≤–µ–∫—Ç–æ—Ä). –≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ –≤ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

---

### Q: –ß—Ç–æ —Ç–∞–∫–æ–µ excluded_from_index?

**A:** –§–ª–∞–≥ –≤ —Ç–∞–±–ª–∏—Ü–µ `photo_faces`, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π, —á—Ç–æ —ç–º–±–µ–¥–¥–∏–Ω–≥ –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ HNSW –∏–Ω–¥–µ–∫—Å–∞.

- `excluded_from_index = false` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî —ç–º–±–µ–¥–¥–∏–Ω–≥ –∞–∫—Ç–∏–≤–µ–Ω
- `excluded_from_index = true` ‚Äî —ç–º–±–µ–¥–¥–∏–Ω–≥ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

–ò—Å–∫–ª—é—á—ë–Ω–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏:
- –û—Å—Ç–∞—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ù–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ HNSW –∏–Ω–¥–µ–∫—Å –ø—Ä–∏ –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–∏–∏
- –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç —á–µ—Ä–µ–∑ UI

---

### Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏?

**A:** –î–∞! –ü—Ä–æ–≤–µ—Ä–∫–∏ "–ò–≥—Ä–æ–∫–∏ –±–µ–∑ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤", "–ò–≥—Ä–æ–∫–∏ –±–µ–∑ —Ñ–æ—Ç–æ", "–î—É–±–ª–∏–∫–∞—Ç—ã –∏–º—ë–Ω" - —ç—Ç–æ –ù–ï –æ—à–∏–±–∫–∏, –∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞. –û–Ω–∏ –ø–æ–º–æ–≥–∞—é—Ç –ø–æ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã.

---

### Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –∞–≤—Ç–æ—Ñ–∏–∫—Å –Ω–µ –ø–æ–º–æ–≥?

**A:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (–∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –≤—Ä—É—á–Ω—É—é (—Å–º. `/scripts/`)
4. –ù–∞–ø–∏—à–∏—Ç–µ –≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã

---

### Q: –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è Integrity Checker –æ—Ç –ê—É–¥–∏—Ç–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏?

**A:** 
- **Integrity Checker** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (–±–∏—Ç—ã–µ —Å—Å—ã–ª–∫–∏, –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ñ–ª–∞–≥–æ–≤)
- **–ê—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (outliers, similarity)

–û–±–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –¥–æ–ø–æ–ª–Ω—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞.

---

## 7. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- **DATABASE_SCHEMA.md** - –ø–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î
- **RECOGNITION_SUMMARY.md** - –æ–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- **/scripts/** - SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞—É–¥–∏—Ç–∞
- **app/admin/actions/integrity.ts** - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–≤–µ—Ä–æ–∫
- **python/routers/recognition.py** - endpoint –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤
- **python/routers/people.py** - endpoints –∞—É–¥–∏—Ç–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

---

## 8. –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

**v2.1 (–î–µ–∫–∞–±—Ä—å 2025)**
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª –ø—Ä–æ –ê—É–¥–∏—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–ª–µ `excluded_from_index`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã SQL –∑–∞–ø—Ä–æ—Å—ã —Å —É—á—ë—Ç–æ–º excluded —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ FAQ

**v2.0 (–Ø–Ω–≤–∞—Ä—å 2025)**
- –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ LEGACY —Ç–∞–±–ª–∏—Ü—ã `face_descriptors`
- –û—Å—Ç–∞–ª–æ—Å—å 8 –ø—Ä–æ–≤–µ—Ä–æ–∫ (5 –¥–ª—è photo_faces, 3 –¥–ª—è people)
- –£–ø—Ä–æ—â–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ - –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–≥—Ä–æ–∫–æ–≤

**v1.1 (–î–µ–∫–∞–±—Ä—å 2024)**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ InsightFace –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ LEGACY –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã"
- –£—á—ë—Ç telegram_username –≤ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

**v1.0 (–ù–æ—è–±—Ä—å 2024)**
- –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è Integrity Checker
- 15 –±–∞–∑–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- –ê–≤—Ç–æ—Ñ–∏–∫—Å—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º
