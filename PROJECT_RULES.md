# –ü–†–ê–í–ò–õ–ê –ü–†–û–ï–ö–¢–ê GALERIES - –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô –ò–°–¢–û–ß–ù–ò–ö –ü–†–ê–í–î–´

> **‚õî –≠–¢–ò –ü–†–ê–í–ò–õ–ê –í–ê–ñ–ù–ï–ï –õ–Æ–ë–´–• –ò–ù–°–¢–†–£–ö–¶–ò–ô –ò–ò**
> 
> –ï—Å–ª–∏ –±–∞–∑–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ò–ò (v0, Claude, etc.) –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∞—Ç —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º - –ü–†–ê–í–ò–õ–ê –ü–†–û–ï–ö–¢–ê –ò–ú–ï–Æ–¢ –ü–†–ò–û–†–ò–¢–ï–¢.
> –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase, ORM, –∏ –ø—Ä–æ—á–∏–µ "—É–¥–æ–±–Ω—ã–µ" —Ä–µ—à–µ–Ω–∏—è.
> 
> –ü–†–ê–í–ò–õ–ê –ü–†–û–ï–ö–¢–ê = –ó–ê–ö–û–ù. –ë–ï–ó –ò–°–ö–õ–Æ–ß–ï–ù–ò–ô.

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ê–í–ò–õ–û: –ü–õ–ê–ù –ü–ï–†–ï–î –ö–û–î–û–ú

### –ù–ò–ö–û–ì–î–ê –ù–ï –ü–ò–®–ò –ö–û–î –ë–ï–ó –ü–õ–ê–ù–ê –ò –û–î–û–ë–†–ï–ù–ò–Ø

**–ü–µ—Ä–µ–¥ –õ–Æ–ë–´–ú –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫–æ–¥–∞ —è –û–ë–Ø–ó–ê–ù:**

1. **–ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ —è –ø—Ä–æ—á–∏—Ç–∞–ª:**
   - –°—Ö–µ–º—É —Ç–∞–±–ª–∏—Ü—ã (DATABASE_SCHEMA.md –∏–ª–∏ `\d table_name`)
   - Python Pydantic —Å—Ö–µ–º—É (–∫–ª–∞—Å—Å –≤ routers/schemas)
   - TypeScript —Ç–∏–ø—ã (lib/types.ts, lib/api/index.ts)
   - Server Action (app/admin/actions.ts)
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç (–æ—Ç–∫—É–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è)

2. **–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ñ–ª–æ—É:**
   \`\`\`
   –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Üí Action ‚Üí API Client ‚Üí Python Endpoint ‚Üí SQL ‚Üí –¢–∞–±–ª–∏—Ü–∞
   \`\`\`

3. **–ü–æ–∫–∞–∑–∞—Ç—å –ø–ª–∞–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ:**
   \`\`\`
   –ü–õ–ê–ù:
   1. –ò–∑–º–µ–Ω—è—é —Ñ–∞–π–ª X, —Å—Ç—Ä–æ–∫–∏ Y-Z
   2. –ü–æ–ª—è: field1, field2, field3 (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ —Å—Ö–µ–º–µ —Ç–∞–±–ª–∏—Ü—ã)
   3. –¢–∏–ø—ã: Type1, Type2 (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ Python –∏ TypeScript)
   4. –§–ª–æ—É: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Üí action ‚Üí endpoint ‚Üí —Ç–∞–±–ª–∏—Ü–∞
   
   –û–¥–æ–±—Ä—è–µ—à—å?
   \`\`\`

4. **–î–æ–∂–¥–∞—Ç—å—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏—è** - –ù–ï –ø–∏—Å–∞—Ç—å –∫–æ–¥ –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–∫–∞–∂–µ—Ç "–¥–∞"

### –ï–°–õ–ò –ò–ò –ù–ê–ß–ò–ù–ê–ï–¢ –ü–ò–°–ê–¢–¨ –ö–û–î –ë–ï–ó –ü–õ–ê–ù–ê

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ–≤–æ—Ä–∏—Ç: **"–°—Ç–æ–ø. –ü–ª–∞–Ω."**

–ò–ò –æ–±—è–∑–∞–Ω –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø–ª–∞–Ω.

---

## üî¥ –ù–û–í–û–ï: –ü–†–ê–í–ò–õ–ê –†–ê–ë–û–¢–´ –° –ë–ê–ó–û–ô –î–ê–ù–ù–´–•

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –ü–ï–†–ï–î –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ë–î –∫–æ–¥–∞

**–î–û –Ω–∞–ø–∏—Å–∞–Ω–∏—è –õ–Æ–ë–û–ì–û SQL –∏–ª–∏ asyncpg –∫–æ–¥–∞:**

\`\`\`
‚òê 1. –ù–∞–π—Ç–∏ –í–°–ï SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã (GrepRepo)
‚òê 2. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –¢–û–ß–ù–£–Æ —Å—Ö–µ–º—É (ReadFile migrations)
‚òê 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã –∫–æ–ª–æ–Ω–æ–∫ (TEXT, JSONB, INTEGER, UUID, etc.)
‚òê 4. –ù–∞–π—Ç–∏ –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô –∫–æ–¥ —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å —ç—Ç–∏–º —Ç–∏–ø–æ–º (GrepRepo)
‚òê 5. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–∞–∫ —ç—Ç–æ—Ç –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç (ReadFile)
‚òê 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –µ—Å–ª–∏ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ (SearchWeb)
‚òê 7. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –∏ –∑–Ω–∞—á–µ–Ω–∏–π
‚òê 8. –¢–û–õ–¨–ö–û –ü–û–¢–û–ú –ø–∏—Å–∞—Ç—å –∫–æ–¥
\`\`\`

**–ï—Å–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø—É–Ω–∫—Ç ‚Üí –û–°–¢–ê–ù–û–í–ò–°–¨ –∏ –≤—ã–ø–æ–ª–Ω–∏ –µ–≥–æ.**

### –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è asyncpg + JSONB

#### –ü–†–ê–í–ò–õ–û: "–ù–ê–ô–î–ò ‚Üí –°–ö–û–ü–ò–†–£–ô ‚Üí –ê–î–ê–ü–¢–ò–†–£–ô"

–ù–ï –ø—Ä–∏–¥—É–º—ã–≤–∞–π –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å JSONB. –ù–ê–ô–î–ò —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω:

\`\`\`python
# 1. –ù–∞–π—Ç–∏ –≥–¥–µ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JSONB
GrepRepo: "JSONB" –≤ scripts/*.sql
# ‚Üí –ù–∞—à–µ–ª photo_faces.insightface_bbox (JSONB)

# 2. –ù–∞–π—Ç–∏ –ö–ê–ö –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ
ReadFile: faces_client.py
# ‚Üí –£–≤–∏–¥–µ–ª –ø–∞—Ç—Ç–µ—Ä–Ω: json.dumps() –ë–ï–ó ::jsonb

# 3. –°–ö–û–ü–ò–†–û–í–ê–¢–¨ —Ä–∞–±–æ—á–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω
value_json = json.dumps(value)  # ‚úÖ
query = "INSERT ... VALUES ($1, $2)"  # –ë–ï–ó ::jsonb cast

# 4. –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–∏–ø (–Ω–∞ —Å–ª—É—á–∞–π —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
if isinstance(row['value'], str):
    config[row['key']] = json.loads(row['value'])
else:
    config[row['key']] = row['value']
\`\`\`

#### –ü–ê–¢–¢–ï–†–ù: –í—Å—Ç–∞–≤–∫–∞ JSONB –¥–∞–Ω–Ω—ã—Ö

\`\`\`python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
value_json = json.dumps(value)  # Python ‚Üí JSON —Å—Ç—Ä–æ–∫–∞
query = "INSERT INTO table (key, value) VALUES ($1, $2)"
await self.execute(query, key, value_json)

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
query = "INSERT INTO table (key, value) VALUES ($1, $2::jsonb)"  # –¥–≤–æ–π–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è!

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
await self.execute(query, key, value)  # asyncpg –Ω–µ –∑–Ω–∞–µ—Ç –∫–∞–∫ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å dict
\`\`\`

**–ü–æ—á–µ–º—É —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- asyncpg –≤–∏–¥–∏—Ç —á—Ç–æ –∫–æ–ª–æ–Ω–∫–∞ JSONB
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç JSON —Å—Ç—Ä–æ–∫—É ‚Üí JSONB –æ–±—ä–µ–∫—Ç
- –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSONB ‚Üí Python –æ–±—ä–µ–∫—Ç (dict/int/str)

#### –ü–ê–¢–¢–ï–†–ù: –ß—Ç–µ–Ω–∏–µ JSONB –¥–∞–Ω–Ω—ã—Ö

\`\`\`python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π legacy –¥–∞–Ω–Ω—ã—Ö
result = await self.fetch(query)
for row in result:
    # asyncpg –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSONB –∫–∞–∫ —É–∂–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
    value = row['value']
    
    # –ù–û –Ω–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
    if isinstance(value, str):
        value = json.loads(value)
    
    config[row['key']] = value

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –≤—Å–µ–≥–¥–∞ –ø–∞—Ä—Å–∏—Ç—å
config[row['key']] = json.loads(row['value'])  # –æ—à–∏–±–∫–∞ –µ—Å–ª–∏ —É–∂–µ –æ–±—ä–µ–∫—Ç!
\`\`\`

#### –ö–û–ì–î–ê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SearchWeb

- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –∫–æ—Ç–æ—Ä—É—é –Ω–µ –∑–Ω–∞–µ—à—å (asyncpg + JSONB)
- ‚úÖ –ù–µ–æ—á–µ–≤–∏–¥–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–ø–æ—á–µ–º—É –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å—Ç—Ä–æ–∫–∞–º–∏)
- ‚úÖ –ü–ï–†–ï–î –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞, –Ω–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫
- ‚ùå –ù–ï –≤–º–µ—Å—Ç–æ —á—Ç–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞

### Debugging –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

**–î–æ–±–∞–≤–ª—è–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –°–†–ê–ó–£, –Ω–µ –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫:**

\`\`\`python
logger.info(f"[Module] Reading value from DB")
value = row['value']
logger.info(f"[Module] Value type: {type(value)}, value: {value}")

# –¢–µ–ø–µ—Ä—å –≤–∏–¥–∏—à—å –ß–¢–û –†–ï–ê–õ–¨–ù–û –ø—Ä–∏—Ö–æ–¥–∏—Ç –∏–∑ –ë–î
\`\`\`

**–ù–ï –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–π —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö. –ü–†–û–í–ï–†–Ø–ô.**

---

## üî¥ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –í–°–ï–• 5 –°–õ–û–Å–í

| –°–ª–æ–π | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å | –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å |
|------|---------------|---------------|
| 1. –¢–∞–±–ª–∏—Ü–∞ | –ö–æ–ª–æ–Ω–∫–∏, —Ç–∏–ø—ã, FK | `\d table_name` –∏–ª–∏ DATABASE_SCHEMA.md |
| 2. Python Schema | Pydantic –º–æ–¥–µ–ª—å | ReadFile python/routers/*.py –∏–ª–∏ python/models/schemas.py |
| 3. Python Endpoint | –ß—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç/–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç | ReadFile python/routers/*.py |
| 4. TypeScript API | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –º–µ—Ç–æ–¥—ã | ReadFile lib/api/index.ts |
| 5. Server Action | –ß—Ç–æ –ø–µ—Ä–µ–¥–∞—ë—Ç/–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç | ReadFile app/admin/actions.ts |

**–ù–ê–†–£–®–ï–ù–ò–ï = –°–¢–û–ü. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–¥ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö 5 —Å–ª–æ—ë–≤.**

---

## üî¥ –ê–ë–°–û–õ–Æ–¢–ù–´–ï –ó–ê–ü–†–ï–¢–´

### 1. –ó–ê–ü–†–ï–©–ï–ù–û: –ù–æ–≤—ã–π –∫–æ–¥ —Å Supabase

\`\`\`typescript
// ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û –¥–ª—è –ù–û–í–û–ì–û –∫–æ–¥–∞
import { createClient } from '@supabase/supabase-js'
await supabase.from('table').select('*')
\`\`\`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å Supabase - —ç—Ç–æ legacy, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω.
–ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç Supabase.

### 2. –ó–ê–ü–†–ï–©–ï–ù–û: –ü—Ä—è–º–æ–π SQL –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

\`\`\`typescript
// ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û
import { sql } from '@/lib/db'
const result = await sql`SELECT * FROM people`
\`\`\`

**–ü–æ—á–µ–º—É:** –í—Å—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î - —á–µ—Ä–µ–∑ Python API.

### 3. –ó–ê–ü–†–ï–©–ï–ù–û: –ì–ª—É—à–∏—Ç—å –æ—à–∏–±–∫–∏

\`\`\`python
# ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û
try:
    result = await do_something()
except:
    pass
\`\`\`

\`\`\`typescript
// ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û
try {
    await doSomething()
} catch (e) {
    // –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º
}
\`\`\`

**–ü–æ—á–µ–º—É:** –°–∫—Ä—ã—Ç—ã–µ –æ—à–∏–±–∫–∏ –¥–µ–ª–∞—é—Ç –æ—Ç–ª–∞–¥–∫—É –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π.

### 4. –ó–ê–ü–†–ï–©–ï–ù–û: –ö–æ—Å—Ç—ã–ª–∏ –≤–º–µ—Å—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

\`\`\`typescript
// ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û - –∫–æ—Å—Ç—ã–ª—å
const url = imageUrl.replace('s3.vlcpadel.com', 'api.vlcpadel.com/proxy')

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ
\`\`\`

**–ü–æ—á–µ–º—É:** –ö–æ—Å—Ç—ã–ª–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –∏ —Å–æ–∑–¥–∞—é—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥.

### 5. –ó–ê–ü–†–ï–©–ï–ù–û: –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞—Ç—å –∏–º–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫/–ø–æ–ª–µ–π

\`\`\`python
# ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û - –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—Ç—å
INSERT INTO photo_faces (bbox, ...)  # –ê –≤–¥—Ä—É–≥ –∫–æ–ª–æ–Ω–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è insightface_bbox?

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ö–µ–º—É
# \d photo_faces ‚Üí —É–≤–∏–¥–µ—Ç—å —á—Ç–æ –∫–æ–ª–æ–Ω–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è insightface_bbox
INSERT INTO photo_faces (insightface_bbox, ...)
\`\`\`

**–ü–æ—á–µ–º—É:** –ù–µ–≤–µ—Ä–Ω—ã–µ –∏–º–µ–Ω–∞ = –æ—à–∏–±–∫–∏ 422/500 –∏ –ø–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏.

### 6. –ó–ê–ü–†–ï–©–ï–ù–û: –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞—Ç—å —Ä–∞–±–æ—Ç—É –±–∏–±–ª–∏–æ—Ç–µ–∫

\`\`\`python
# ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û - –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—Ç—å –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
# "asyncpg –Ω–∞–≤–µ—Ä–Ω–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç dict –≤ JSONB"
query = "INSERT ... VALUES ($1, $2)"
await execute(query, key, my_dict)

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏–ª–∏ –Ω–∞–π—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω
# 1. GrepRepo: –Ω–∞–π—Ç–∏ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JSONB
# 2. ReadFile: –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ö–ê–ö —Ç–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç
# 3. SearchWeb: "asyncpg insert jsonb" –µ—Å–ª–∏ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ
# 4. –ü–û–¢–û–ú –ø–∏—Å–∞—Ç—å –∫–æ–¥
\`\`\`

**–ü–æ—á–µ–º—É:** –ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ = 5+ –∏—Ç–µ—Ä–∞—Ü–∏–π –±–∞–≥—Ñ–∏–∫—Å–æ–≤.

### 7. –ó–ê–ü–†–ï–©–ï–ù–û: –ú–µ–Ω—è—Ç—å –∫–æ–¥ –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è FLOW

\`\`\`python
# ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û
# –£–≤–∏–¥–µ–ª json.dumps() ‚Üí —É–±—Ä–∞–ª
# –ü–æ—Ç–æ–º –¥–æ–±–∞–≤–∏–ª ::jsonb
# –ü–æ—Ç–æ–º —É–±—Ä–∞–ª json.dumps() –ò ::jsonb
# 5+ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ 1!

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –°–ù–ê–ß–ê–õ–ê –ø–æ–Ω—è—Ç—å –≤–µ—Å—å FLOW:
# 1. Python dict ‚Üí json.dumps() ‚Üí JSON —Å—Ç—Ä–æ–∫–∞
# 2. asyncpg ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —á—Ç–æ –∫–æ–ª–æ–Ω–∫–∞ JSONB ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç
# 3. PostgreSQL ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ JSONB –æ–±—ä–µ–∫—Ç
# 4. asyncpg –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞–∫ Python –æ–±—ä–µ–∫—Ç
# –¢–ï–ü–ï–†–¨ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∫–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –° –ü–ï–†–í–û–ì–û –†–ê–ó–ê
\`\`\`

---

## ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–´–ï –ü–ê–¢–¢–ï–†–ù–´

### –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ (–Ω–æ–≤—ã–π –∫–æ–¥)

\`\`\`typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ß–µ—Ä–µ–∑ Python API
const response = await fetch(`${process.env.FASTAPI_URL}/api/crud/people`)
const result = await response.json()
\`\`\`

### –†–∞–±–æ—Ç–∞ —Å JSONB —á–µ—Ä–µ–∑ asyncpg

\`\`\`python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –í—Å—Ç–∞–≤–∫–∞ JSONB
import json

# –°–µ—Ä–∏–∞–ª–∏–∑—É–µ–º –≤ JSON —Å—Ç—Ä–æ–∫—É
value_json = json.dumps({
    "key1": "value1",
    "key2": 123,
    "key3": [1, 2, 3]
})

# –í—Å—Ç–∞–≤–ª—è–µ–º –ë–ï–ó ::jsonb cast (asyncpg —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ç–∏–ø)
query = "INSERT INTO table (data) VALUES ($1)"
await self.execute(query, value_json)

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ß—Ç–µ–Ω–∏–µ JSONB
query = "SELECT data FROM table WHERE id = $1"
row = await self.fetchone(query, id)

# asyncpg –≤–µ—Ä–Ω–µ—Ç —É–∂–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–π Python –æ–±—ä–µ–∫—Ç!
data = row['data']  # dict, int, list, etc.

# –ù–û –Ω–∞ —Å–ª—É—á–∞–π legacy –¥–∞–Ω–Ω—ã—Ö —Å –¥–≤–æ–π–Ω–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π:
if isinstance(data, str):
    data = json.loads(data)
\`\`\`

---

## –ü–†–û–¶–ï–°–° –†–ê–ó–†–ê–ë–û–¢–ö–ò

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–æ—á–∏—Ç–∞–π PROJECT_RULES.md** - —ç—Ç–æ—Ç —Ñ–∞–π–ª
2. **–ü—Ä–æ—á–∏—Ç–∞–π AI_DEVELOPER_CHECKLIST.md** - —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –ò–ò
3. **–ü—Ä–æ–≤–µ—Ä—å MIGRATION_STATUS.md** - —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
4. **–ò—Å–ø–æ–ª—å–∑—É–π ReadFile** - —á–∏—Ç–∞–π —Ñ–∞–π–ª—ã –ü–ï–†–ï–î —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### –ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∫–æ–¥–∞ —Å –ë–î

1. **–ù–∞–π–¥–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω** - –º–æ–∂–µ—Ç —É–∂–µ –µ—Å—Ç—å —Ä–µ—à–µ–Ω–∏–µ
2. **–ü—Ä–æ—á–∏—Ç–∞–π –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç** - –Ω–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–π
3. **–ü—Ä–æ–≤–µ—Ä—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** - –µ—Å–ª–∏ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
4. **–î–æ–±–∞–≤—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤** - —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
5. **–¢–û–õ–¨–ö–û –ü–û–¢–û–ú –ø–∏—à–∏ –∫–æ–¥** - —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü—Ä–∏ debugging –ø—Ä–æ–±–ª–µ–º —Å –ë–î

1. **–î–æ–±–∞–≤—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –°–†–ê–ó–£** - —Ç–∏–ø—ã –∏ –∑–Ω–∞—á–µ–Ω–∏—è
2. **–ü—Ä–æ–≤–µ—Ä—å –≤–µ—Å—å FLOW –¥–∞–Ω–Ω—ã—Ö** - –æ—Ç UI –¥–æ –ë–î –∏ –æ–±—Ä–∞—Ç–Ω–æ
3. **–ù–∞–π–¥–∏ –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –º–µ–Ω—è—é—Ç —Ç–∏–ø** - —Ç–∞–º –ø—Ä–æ–±–ª–µ–º–∞
4. **–ò—Å–ø—Ä–∞–≤—å –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã** - –Ω–µ —Å–∏–º–ø—Ç–æ–º

---

## –ö–û–ú–ê–ù–î–´

\`\`\`bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Python —Å–µ—Ä–≤–µ—Ä–∞
cd /home/nickr/python && ./run.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -100 /tmp/fastapi.log

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
psql "postgresql://galeries_user:galeries_strong_pass_2025@localhost:5432/galleries"

# MinIO
docker exec minio mc ls local/galleries/
\`\`\`

---

## –í–ê–ñ–ù–´–ï –ê–î–†–ï–°–ê

- **Python API:** `http://localhost:8001` (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **Python API:** `https://api.vlcpadel.com` (–≤–Ω–µ—à–Ω–∏–π)
- **MinIO:** `http://localhost:9200` (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- **PostgreSQL:** `localhost:5432`

---

**–í–µ—Ä—Å–∏—è:** 1.3.0 (–¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å JSONB)
**–î–∞—Ç–∞:** 28 –Ω–æ—è–±—Ä—è 2025
